<app-header [button]="'perfil'"></app-header>

<ng-container *ngIf="user else loginTemplate">
  <div class="content">
      <div class="profile">
          <img class="profile-img" alt="Profile Image" [src]="user?.avatar_url">
          <div class="infos">
              <span class="info" id="login-info">{{email}}</span>
          </div>
      </div>
      <div class="favoritos">
          <h3>Favoritos</h3>
          <div class="cards">
              <app-anime-card *ngFor="let favorito of user?.favoritos" [title] = "favorito.anime.title" [image_url] = "favorito.anime.image_url" [animeId]="favorito.anime.id"></app-anime-card>
          </div>
      </div>
  </div>
</ng-container>
<ng-template #loginTemplate>
  <div class="page-content">
    <div class="login-content">
      <div class="forms" id="loginForm">
        <h3>Login</h3>
        <input type="text" id="" name="" placeholder="E-mail" [(ngModel)]="loginEmail" (ngModelChange)="validateLogin()">
        <input type="text" id="" name="" placeholder="Senha" [(ngModel)]="loginPassword" (ngModelChange)="validateLogin()">
        <button type="submit" (click)="logar()" [disabled]="!canLogin">Login</button>
      </div>
      <div class="forms">
        <h3>Cadastro</h3>
        <input type="text" id="" name="" placeholder="Nome" [(ngModel)]="name" (ngModelChange)="validateInput()">
        <input type="text" id="" name="" placeholder="E-mail" [(ngModel)]="email" (ngModelChange)="validateInput()">
        <input type="text" id="" name="" placeholder="Senha" [(ngModel)]="password" (ngModelChange)="validateInput()">
        <input type="text" id="" name="" placeholder="Confirmar senha" [(ngModel)]="rePassword" (ngModelChange)="validateInput()">
        <select name="genre" [(ngModel)]="genre">
          <option hidden value="" disabled selected>Selecione seu sexo</option>
          <option *ngFor="let sexo of defaultGenre" [ngValue]="sexo">
            {{ sexo }}
          </option>
        </select>
        <div class="receive-emails">
          <input type="checkbox" class="checkbox" [(ngModel)]="confirmation" (ngModelChange)="markCheckbox()">
          <p>Desejo receber e-mails de confirmação</p>
        </div>
        <button type="submit" (click)="registrar()" [disabled]="!canLogin">Cadastrar</button>
      </div>
    </div>
  </div>
</ng-template>
<app-footer></app-footer>
